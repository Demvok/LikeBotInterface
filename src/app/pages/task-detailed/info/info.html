<div class="content-wrapper">
    <header>
        <div style="display: flex; align-items: center; justify-content: space-between;">
            <div class="task-id-header" *ngIf="task" style="font-size: 1.2rem; font-weight: bold; color: var(--color-text-dark); font-family: 'Courier New', monospace; letter-spacing: 0.1rem; min-width: 120px;">
                #{{ task.task_id }}
            </div>
            <div style="text-align: center; flex: 1;">
                <h1>Task Overview</h1>
                <div class="task-title" *ngIf="task">{{ task.name }}</div>
            </div>
            <div style="min-width: 120px;"></div> <!-- Spacer for balance -->
        </div>
    </header>
    <main>
        <ng-container *ngIf="loading">
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <p>Loading task information...</p>
            </div>
        </ng-container>
        
        <ng-container *ngIf="error">
            <div class="error-state">
                <div class="error-icon">⚠️</div>
                <p>{{ error }}</p>
            </div>
        </ng-container>
        
        <ng-container *ngIf="!loading && !error && task">
            <div class="task-info-grid">
                <!-- Status & Statistics Card -->
                <div class="info-card status-card">
                    <div class="card-header">
                        <h3>Status & Statistics</h3>
                    </div>
                    <div class="card-content">
                        <div class="status-badge" [ngClass]="'status-' + task.status.toLowerCase()">
                            {{ getStatusText(task.status) }}
                        </div>
                        <div style="margin-top: 1.5rem; display: flex; justify-content: space-around; text-align: center;">
                            <div class="stat-item">
                                <div class="stat-value">{{ task.post_ids.length }}</div>
                                <div class="stat-label">Posts</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">{{ task.accounts.length }}</div>
                                <div class="stat-label">Accounts</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Card -->
                <div class="info-card action-card">
                    <div class="card-header">
                        <h3>Action Details</h3>
                    </div>
                    <div class="card-content">
                        <div class="action-type">
                            <span class="label">Type:</span>
                            <span class="value action-type-badge" [ngClass]="'action-' + task.action.type">
                                {{ getActionTypeText(task.action.type) }}
                            </span>
                        </div>
                        <div class="action-details" *ngIf="task.action.type === 'react' && task.action.palette">
                            <span class="label">Reaction Type:</span>
                            <span class="value palette-badge" [ngClass]="'palette-' + task.action.palette">
                                {{ task.action.palette | titlecase }}
                            </span>
                        </div>
                        <div class="action-details" *ngIf="task.action.type === 'comment' && task.action.content">
                            <span class="label">Comment:</span>
                            <span class="value comment-preview">"{{ task.action.content }}"</span>
                        </div>
                    </div>
                </div>

                <!-- Timestamps Card -->
                <div class="info-card timestamps-card">
                    <div class="card-header">
                        <h3>Timeline</h3>
                    </div>
                    <div class="card-content">
                        <div class="timestamp-item">
                            <div class="timestamp-label">Created</div>
                            <div class="timestamp-value">{{ task.created_at | date:'MMM d, y, h:mm a' }}</div>
                        </div>
                        <div class="timestamp-item">
                            <div class="timestamp-label">Last Updated</div>
                            <div class="timestamp-value">{{ task.updated_at | date:'MMM d, y, h:mm a' }}</div>
                        </div>
                        <!-- <div class="timestamp-item">
                            <div class="timestamp-label">Duration</div>
                            <div class="timestamp-value">{{ getTaskDuration() }}</div>
                        </div> -->
                    </div>
                </div>

                <!-- Description Card -->
                <div class="info-card description-card" *ngIf="task.description">
                    <div class="card-header">
                        <h3>Description</h3>
                    </div>
                    <div class="card-content">
                        <p class="description-text">{{ task.description }}</p>
                    </div>
                </div>
            </div>
        </ng-container>
    </main>
    <footer>
        <div class="footer-actions" *ngIf="task && !loading && !error">
            <span class="last-updated">Last updated: {{ getFormattedTime() }}</span>
        </div>
    </footer>  
</div>